<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/BasicTemplate.xhtml">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewAction action="#{searchSaleController.initialize}" />
		</f:metadata>
	</ui:define>

	<ui:define name="content">
		<!-- 
		<script>
			function addMaintenance() {
				PF('stateButtom2').jq.click();
			}
		</script>
 -->
		<div class="title ui-widget-header ui-corner-all">
			<h:panelGrid style="margin:auto;">
		BUSCAR VENTAS
		</h:panelGrid>

		</div>

		<h:form id="form">

			<h:panelGrid style="margin:auto;">

				<h:panelGrid style="margin:auto;text-align:center;">
					<p:messages id="messages" showDetail="true"></p:messages>
				</h:panelGrid>

				<h:panelGrid columns="3">
					<h:panelGrid columns="2">
						<p:outputLabel value="Tipo de busqueda:"></p:outputLabel>
						<p:selectOneMenu id="searchType"
							value="#{searchSaleController.searchTypeSelected}"
							required="true"
							requiredMessage="Debe seleccionar tipo de busqueda">
							<f:selectItem itemLabel="Seleccione..." itemValue="" />
							<f:selectItem itemLabel="Buscar por numero de tarjeta."
								itemValue="creditCard" />
							<f:selectItem itemLabel="Buscar por DNI responsable."
								itemValue="dni" />
							<f:selectItem itemLabel="Buscar por datos de venta."
								itemValue="saleData" />
							<f:selectItem itemLabel="Buscar por datos personales"
								itemValue="personalData" />
							<p:ajax immediate="true" process=":form:searchType"
								listener="#{searchSaleController.onChangeSearchType}"
								update=":form:searchTypeOut :form:messages"></p:ajax>
						</p:selectOneMenu>
					</h:panelGrid>
					<p:outputPanel id="searchTypeOut">
						<h:panelGrid columns="4"
							rendered="#{searchSaleController.searchByDateSaleRendered}">

							<p:outputLabel value="F. Venta Desde:"></p:outputLabel>
							<p:calendar navigator="true"
								value="#{searchSaleController.dateOfSaleStarted}"
								required="true"
								requiredMessage="Debe ingresar fecha venta desde:"
								pattern="dd-MM-yyyy"></p:calendar>

							<p:outputLabel value="F. Venta Hasta:"></p:outputLabel>
							<p:calendar navigator="true"
								value="#{searchSaleController.dateOfSaleEnded}" required="true"
								requiredMessage="Debe ingresar fecha venta hasta:"
								pattern="dd-MM-yyyy"></p:calendar>


							<p:outputLabel value="Banco:"></p:outputLabel>
							<p:selectOneMenu id="bank"
								value="#{searchSaleController.bankSelected}">
								<f:selectItem itemLabel="Seleccione..." itemValue="" />
								<f:selectItems value="#{searchSaleController.banks}"></f:selectItems>
							</p:selectOneMenu>

							<p:outputLabel value="Producto:"></p:outputLabel>
							<p:selectOneMenu id="product"
								value="#{searchSaleController.productSelected}">
								<f:selectItem itemLabel="Seleccione..." itemValue="" />
								<f:selectItems value="#{searchSaleController.products}"></f:selectItems>
							</p:selectOneMenu>

							<p:outputLabel value="F. Afiliacion"></p:outputLabel>
							<p:calendar navigator="true"
								value="#{searchSaleController.affiliationDate}"
								pattern="dd-MM-yyyy"></p:calendar>


							<p:outputLabel value="Estado:"></p:outputLabel>
							<p:selectOneMenu id="state"
								value="#{searchSaleController.saleStateSelected}">
								<f:selectItem itemLabel="Seleccione..." itemValue="" />
								<f:selectItems value="#{searchSaleController.saleStates}"></f:selectItems>
							</p:selectOneMenu>

						</h:panelGrid>

						<h:panelGrid columns="2"
							rendered="#{searchSaleController.searchByCreditCardNumberRendered}">

							<p:outputLabel value="NUM. TARJETA"></p:outputLabel>
							<p:inputText style="width: 120px;" required="true"
								requiredMessage="Debe ingresar NUM. TARJETA"
								value="#{searchSaleController.creditCardNumber}"></p:inputText>

						</h:panelGrid>

						<h:panelGrid columns="2"
							rendered="#{searchSaleController.searchByDocumentNumberResponsibleRendered}">
							<p:outputLabel value="DNI RESP."></p:outputLabel>
							<p:inputText style="width: 120px;" required="true"
								requiredMessage="Debe ingresar DNI RESP."
								value="#{searchSaleController.nuicResponsible}"></p:inputText>

						</h:panelGrid>


						<h:panelGrid columns="2"
							rendered="#{searchSaleController.searchByNamesRendered}">

							<p:outputLabel value="Tipo de persona:"></p:outputLabel>
							<p:selectOneMenu id="personType"
								value="#{searchSaleController.personTypeSelected}"
								required="true"
								requiredMessage="Debe seleccionar tipo de persona">
								<f:selectItem itemLabel="Seleccione..." itemValue="" />
								<f:selectItem itemLabel="Responsable" itemValue="responsible" />
								<f:selectItem itemLabel="Asegurado" itemValue="insured" />
								<f:selectItem itemLabel="Contratante" itemValue="contractor" />
								<p:ajax immediate="true"
									listener="#{searchSaleController.onChangePersonType}"
									update="@form"></p:ajax>
							</p:selectOneMenu>

						</h:panelGrid>

						<h:panelGrid columns="2"
							rendered="#{searchSaleController.searchByContractorRendered}">

							<p:outputLabel value="NUIC CONT."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.nuicContractor}"></p:inputText>

							<p:outputLabel value="AP. PATERNO CONT."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.lastnamePaternalContractor}"></p:inputText>

							<p:outputLabel value="AP. MATERNO CONT."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.lastnameMaternalContractor}"></p:inputText>

							<p:outputLabel value="NOMBRES CONT."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.firstnameContractor}"></p:inputText>

						</h:panelGrid>
						<h:panelGrid columns="2"
							rendered="#{searchSaleController.searchByInsuredRendered}">

							<p:outputLabel value="NUIC ASEG."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.nuicInsured}"></p:inputText>

							<p:outputLabel value="AP. PATERNO ASEG."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.lastnamePaternalInsured}"></p:inputText>

							<p:outputLabel value="AP. MATERNO ASEG."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.lastnameMaternalInsured}"></p:inputText>

							<p:outputLabel value="NOMBRES ASEG."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.firstnameInsured}"></p:inputText>
						</h:panelGrid>
						<h:panelGrid columns="2"
							rendered="#{searchSaleController.searchByResponsibleRendered}">

							<p:outputLabel value="NUIC RESP."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.nuicResponsible}"></p:inputText>

							<p:outputLabel value="AP. PATERNO RESP."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.lastnamePaternalResponsible}"></p:inputText>

							<p:outputLabel value="AP. MATERNO RESP."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.lastnameMaternalResponsible}"></p:inputText>

							<p:outputLabel value="NOMBRES RESP."></p:outputLabel>
							<p:inputText style="width: 230px;"
								value="#{searchSaleController.firstnameResponsible}"></p:inputText>
						</h:panelGrid>
					</p:outputPanel>
				</h:panelGrid>
				<h:panelGrid columns="2" style="margin:auto;text-align:center;">
					<p:commandButton icon="ui-icon-search"
						actionListener="#{searchSaleController.search}" value="Buscar"
						process="@form"
						update=":form:searchTypeOut :form:searchTable :form:saleId :form:salesCount :form:messages 
						:form:updatesButtom :form:collectionsButtom :form:maintenancesButtom  
						:form:stateButtom :form:repaymentsButtom">
					</p:commandButton>

					<p:commandButton action="#{searchSaleController.exportExcel}"
						value="Exportar a excel" process="@form" ajax="false">
					</p:commandButton>

				</h:panelGrid>
			</h:panelGrid>

			<h:panelGrid style="margin:auto;">

				<h:panelGrid columns="2" style="width:100%;">

					<p:outputLabel id="saleId"
						value="Venta seleccionada: #{searchSaleController.saleSelected!=null?searchSaleController.saleSelected.code:''}">
					</p:outputLabel>


						<h:panelGrid style="width:100%;">
							<p:outputLabel id="salesCount"
								value="Se encontraron #{searchSaleController.sales!=null?searchSaleController.sales.size():'0'} ventas.">
							</p:outputLabel>
						</h:panelGrid>

				</h:panelGrid>

				<h:panelGrid columns="7" style="width:100%;">

					<p:commandButton id="updatesButtom"
						actionListener="#{searchSaleController.showCreditCards}"
						icon="ui-icon-search" value="Ver tarjetas"
						oncomplete="PF('updatesDialog').show()"
						update=":formUpdate:updatesDetail"
						disabled="#{searchSaleController.saleSelected==null}">
					</p:commandButton>

					<p:commandButton id="repaymentsButtom"
						actionListener="#{searchSaleController.showRepayments}"
						icon="ui-icon-search" value="Ver extornos"
						oncomplete="PF('repaymentsDialog').show()"
						update=":formRepayment:repaymentsDetail"
						disabled="#{searchSaleController.saleSelected==null}">
					</p:commandButton>

					<p:commandButton id="collectionsButtom"
						actionListener="#{searchSaleController.showCollections}"
						icon="ui-icon-search" value="Ver cobranzas"
						oncomplete="PF('collectionsDialog').show()"
						update=":formCollection:collectionsDetail"
						disabled="#{searchSaleController.saleSelected==null}">
					</p:commandButton>

					<p:commandButton id="maintenancesButtom"
						actionListener="#{searchSaleController.showMaintenances}"
						icon="ui-icon-search" value="Ver estados"
						oncomplete="PF('maintenancesDialog').show()"
						update=":formMaintenance:maintenancesDetail"
						disabled="#{searchSaleController.saleSelected==null}">
					</p:commandButton>

					<p:commandButton id="stateButtom" immediate="true"
						icon="ui-icon-pencil" value="Editar estado"
						update=":form:messages"
						actionListener="#{searchSaleController.addMaintenance}"
						disabled="#{searchSaleController.saleSelected==null}">
						<p:ajax event="dialogReturn" update=":form:searchTable"
							listener="#{searchSaleController.afterAddMaintenance}" />
					</p:commandButton>
					
				</h:panelGrid>


				<p:dataTable value="#{searchSaleController.sales}" var="s"
					scrollable="true" scrollWidth="900" paginator="true" rows="10"
					selectionMode="single"
					selection="#{searchSaleController.saleSelected}" rowKey="#{s.id}"
					id="searchTable">

					<p:ajax event="rowSelect"
						update=":form:updatesButtom :form:collectionsButtom :form:maintenancesButtom :form:stateButtom :form:repaymentsButtom :form:saleId" />
					<p:ajax event="rowUnselect"
						update=":form:updatesButtom :form:collectionsButtom :form:maintenancesButtom :form:stateButtom :form:repaymentsButtom :form:saleId" />


					<p:column headerText="CODIGO" width="100">
						<h:outputText value="#{s.code}"></h:outputText>
					</p:column>

					<p:column headerText="TIPO DE DOCUMENTO" width="80">
						<h:outputText value="#{s.documentType}"></h:outputText>
					</p:column>

					<p:column headerText="NUIC RESP PAGO" width="80">
						<h:outputText value="#{s.payer.nuicResponsible}"></h:outputText>
					</p:column>

					<p:column headerText="AP PAT RESP PAGO" width="80">
						<h:outputText value="#{s.payer.lastnamePaternalResponsible}"></h:outputText>
					</p:column>

					<p:column headerText="AP MAT RESP PAGO" width="80">
						<h:outputText value="#{s.payer.lastnameMaternalResponsible}"></h:outputText>
					</p:column>

					<p:column headerText="NOMBRES RESP PAGO" width="80">
						<h:outputText value="#{s.payer.firstnameResponsible}"></h:outputText>
					</p:column>

					<p:column headerText="N° TARJETA DE CREDITO" width="100">
						<h:outputText value="#{s.creditCard.number}"></h:outputText>
					</p:column>

					<p:column headerText="N° DE CUENTA" width="80">
						<h:outputText value="#{s.accountNumber}"></h:outputText>
					</p:column>

					<p:column headerText="FECHA VENC TARJETA" width="80">
						<h:outputText value="#{s.creditCard.expirationDate}">
							<f:convertDateTime pattern="MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="ESTADO" width="80">
						<h:outputText value="#{s.creditCard.state}"></h:outputText>
					</p:column>

					<p:column headerText="DIAS MORA" width="80">
						<h:outputText value="#{s.creditCard.daysOfDefault}"></h:outputText>
					</p:column>



					<p:column headerText="NUIC CONTRATANTE" width="80">
						<h:outputText value="#{s.nuicContractor}"></h:outputText>
					</p:column>

					<p:column headerText="AP PAT CONTRATANTE" width="80">
						<h:outputText value="#{s.lastnamePaternalContractor}"></h:outputText>
					</p:column>

					<p:column headerText="AP MAT CONTRATANTE" width="80">
						<h:outputText value="#{s.lastnameMaternalContractor}"></h:outputText>
					</p:column>

					<p:column headerText="NOMBRES CONTRATANTE" width="80">
						<h:outputText value="#{s.firstnameContractor}"></h:outputText>
					</p:column>


					<p:column headerText="NUIC ASEGURADO" width="80">
						<h:outputText value="#{s.nuicInsured}"></h:outputText>
					</p:column>

					<p:column headerText="AP PAT ASEGURADO" width="80">
						<h:outputText value="#{s.lastnamePaternalInsured}"></h:outputText>
					</p:column>

					<p:column headerText="AP MAT ASEGURADO" width="80">
						<h:outputText value="#{s.lastnameMaternalInsured}"></h:outputText>
					</p:column>

					<p:column headerText="NOMBRES ASEGURADO" width="80">
						<h:outputText value="#{s.firstnameInsured}"></h:outputText>
					</p:column>

					<p:column headerText="TELEFONO 1" width="80">
						<h:outputText value="#{s.phone1}"></h:outputText>
					</p:column>

					<p:column headerText="TELEFONO 2" width="80">
						<h:outputText value="#{s.phone2}"></h:outputText>
					</p:column>

					<p:column headerText="CORREO" width="120">
						<h:outputText value="#{s.payer.mail}"></h:outputText>
					</p:column>

					<p:column headerText="DEPARTAMENTO" width="80">
						<h:outputText value="#{s.payer.department}"></h:outputText>
					</p:column>

					<p:column headerText="PROVINCIA" width="80">
						<h:outputText value="#{s.payer.province}"></h:outputText>
					</p:column>

					<p:column headerText="DISTRITO" width="80">
						<h:outputText value="#{s.payer.district}"></h:outputText>
					</p:column>

					<p:column headerText="DIRECCION" width="80"
						style="white-space:nowrap;">
						<h:outputText value="#{s.payer.address}"></h:outputText>
					</p:column>






					<p:column headerText="FECHA DE VENTA" width="80">
						<h:outputText value="#{s.dateOfSale}" width="80">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="CANAL DE VENTA" width="80">
						<h:outputText value="#{s.channelOfSale}"></h:outputText>
					</p:column>

					<p:column headerText="LUGAR DE VENTA" width="80">
						<h:outputText value="#{s.placeOfSale}"></h:outputText>
					</p:column>

					<p:column headerText="CODIGO DE VENDEDOR" width="80">
						<h:outputText value="#{s.vendorCode}"></h:outputText>
					</p:column>

					<p:column headerText="NOMBRE DE VENDEDOR" width="80">
						<h:outputText value="#{s.vendorName}"></h:outputText>
					</p:column>

					<p:column headerText="# DE POLIZA" width="80">
						<h:outputText value="#{s.policyNumber}"></h:outputText>
					</p:column>

					<p:column headerText="# DE CERTIFICADO" width="80">
						<h:outputText value="#{s.certificateNumber}"></h:outputText>
					</p:column>

					<p:column headerText="# DE PROPUESTA" width="80">
						<h:outputText value="#{s.proposalNumber}"></h:outputText>
					</p:column>

					<p:column headerText="CODIGO DE COMERCIO" width="80">
						<h:outputText value="#{s.commerce.code}"></h:outputText>
					</p:column>


					<p:column headerText="PRODUCTO" width="80">
						<h:outputText value="#{s.commerce.product.name}"></h:outputText>
					</p:column>

					<p:column headerText="DESCRIPCION DE PRODUCTO" width="80">
						<h:outputText value="#{s.productDescription}"></h:outputText>
					</p:column>

					<p:column headerText="PERIODO DE COBRO" width="80">
						<h:outputText value="#{s.collectionPeriod}"></h:outputText>
					</p:column>

					<p:column headerText="TIPO DE COBRO" width="80">
						<h:outputText value="#{s.collectionType}"></h:outputText>
					</p:column>

					<p:column headerText="MEDIO DE PAGO" width="80">
						<h:outputText value="#{s.commerce.paymentMethod.name}"></h:outputText>
					</p:column>

					<p:column headerText="PRIMA" width="80">
						<h:outputText value="#{s.insurancePremium}"></h:outputText>
					</p:column>

					<p:column headerText="FECHA DE AUDITORIA" width="80">
						<h:outputText value="#{s.auditDate}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="USUARIO DE AUDITORIA" width="80">
						<h:outputText value="#{s.auditUser}"></h:outputText>
					</p:column>

					<p:column headerText="ESTADO" width="80">
						<h:outputText value="#{s.saleState.state.name}"></h:outputText>
					</p:column>

					<p:column headerText="FECHA ESTADO" width="80">
						<h:outputText value="#{s.saleState.date}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="USUARIO ESTADO" width="80">
						<h:outputText value="#{s.saleState.downUser}"></h:outputText>
					</p:column>

					<p:column headerText="CANAL ESTADO" width="80">
						<h:outputText value="#{s.saleState.downChannel}"></h:outputText>
					</p:column>

					<p:column headerText="MOTIVO ESTADO" width="80">
						<h:outputText value="#{s.saleState.downReason}"></h:outputText>
					</p:column>

					<p:column headerText="OBSERVACIONES ESTADO" width="80"
						style="white-space:nowrap;">
						<h:outputText value="#{s.saleState.downObservation}"></h:outputText>
					</p:column>

					<p:column headerText="FECHA ACT TC" width="80">
						<h:outputText value="#{s.creditCard.updateDate}" width="80">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>

					<p:column headerText="AFILIADO" width="80">
						<h:outputText value="#{s.affiliation==true?'Si':'No'}" width="80">
						</h:outputText>
					</p:column>

					<p:column headerText="FECHA DE AFILIACION" width="80">
						<h:outputText value="#{s.affiliationDate}" width="80">
							<f:convertDateTime pattern="dd/MM/yyyy hh:mm:ss" />
						</h:outputText>
					</p:column>

					<p:column headerText="AFILIADO USUARIO" width="80">
						<h:outputText value="#{s.affiliationUser.username}" width="80">
						</h:outputText>
					</p:column>

					<p:column headerText="BANCO" width="80">
						<h:outputText value="#{s.commerce.bank.name}"></h:outputText>
					</p:column>


					<p:column headerText="FECHA CREACION" width="80">
						<h:outputText value="#{s.createdAt}">
							<f:convertDateTime pattern="dd-MM-yyyy hh:mm:ss a" />
						</h:outputText>
					</p:column>

					<p:column headerText="USUARIO CREACION" width="80">
						<h:outputText value="#{s.createdBy.username}"></h:outputText>
					</p:column>

					<p:column headerText="Notificaciones vituales " width="80">
						<h:outputText value="#{s.mailingRetries}"></h:outputText>
					</p:column>

					<p:column headerText="Notificaciones físicas" width="80">
						<h:outputText value="#{s.printingRetries}"></h:outputText>
					</p:column>

					<p:column headerText="Notificación tipo" width="80">
						<h:outputText value="#{s.notification.type.name}"></h:outputText>
					</p:column>

					<p:column headerText="Notificación estado" width="80">
						<h:outputText value="#{s.notification.state.name}"></h:outputText>
					</p:column>

					<p:column headerText="Notificación enviado" width="80">
						<h:outputText value="#{s.notification.sendingAt}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputText>
					</p:column>



				</p:dataTable>

			</h:panelGrid>

		</h:form>

		<p:dialog header="Tarjetas" widgetVar="updatesDialog"
			showEffect="fade" hideEffect="fade" width="800" height="200">
			<h:form id="formUpdate">
				<p:outputPanel id="updatesDetail" style="text-align:center;">

					<h:panelGrid style="margin:auto;">

						<p:dataTable value="#{searchSaleController.updates}" var="s"
							paginator="true" rows="5" id="updatesTable">


							<p:column headerText="N° TARJETA DE CREDITO" width="100">
								<h:outputText value="#{s.number}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA VENC TARJETA" width="80">
								<h:outputText value="#{s.expirationDate}">
									<f:convertDateTime pattern="MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="ESTADO" width="80">
								<h:outputText value="#{s.state}"></h:outputText>
							</p:column>

							<p:column headerText="DIAS MORA" width="80">
								<h:outputText value="#{s.daysOfDefault}"></h:outputText>
							</p:column>

							<p:column headerText="VALIDACION" width="80">
								<h:outputText value="#{s.validation}"></h:outputText>
							</p:column>


							<p:column headerText="FECHA CREACION" width="80">
								<h:outputText value="#{s.createdAt}">
									<f:convertDateTime pattern="dd-MM-yyyy hh:mm:ss a" />
								</h:outputText>
							</p:column>

							<p:column headerText="USUARIO CREACION" width="80">
								<h:outputText value="#{s.createdBy.username}"></h:outputText>
							</p:column>


						</p:dataTable>

					</h:panelGrid>
				</p:outputPanel>
			</h:form>
		</p:dialog>

		<p:dialog header="Cobranzas" widgetVar="collectionsDialog"
			showEffect="fade" hideEffect="fade" width="800" height="200">
			<h:form id="formCollection">

				<p:outputPanel id="collectionsDetail" style="text-align:center;">

					<h:panelGrid style="margin:auto;">

						<p:dataTable value="#{searchSaleController.collections}" var="c"
							paginator="true" rows="5" id="collectionsTable">

							<p:column headerText="FECHA AFILIACION" width="80">
								<h:outputText value="#{c.affiliationDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="IMPORTE MAXIMO" width="100">
								<h:outputText value="#{c.maximumAmount}"></h:outputText>
							</p:column>

							<p:column headerText="IMPORTE CARGO" width="100">
								<h:outputText value="#{c.chargeAmount}"></h:outputText>
							</p:column>

							<p:column headerText="NUMERO DE RECIBO" width="100">
								<h:outputText value="#{c.receiptNumber}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA ACT TC" width="80">
								<h:outputText value="#{c.creditCardUpdated}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA ESTIMADA" width="80">
								<h:outputText value="#{c.estimatedDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA AUTORIZACION" width="80">
								<h:outputText value="#{c.authorizationDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA DEPOSITO" width="80">
								<h:outputText value="#{c.depositDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="CODIGO RESPUESTA" width="100">
								<h:outputText value="#{c.responseCode}"></h:outputText>
							</p:column>

							<p:column headerText="CODIGO AUTORIZACION" width="100">
								<h:outputText value="#{c.authorizationCode}"></h:outputText>
							</p:column>

							<p:column headerText="MENSAJE RESPUESTA" width="100">
								<h:outputText value="#{c.responseMessage}"></h:outputText>
							</p:column>

							<p:column headerText="ACCION" width="100">
								<h:outputText value="#{c.action}"></h:outputText>
							</p:column>

							<p:column headerText="ESTADO TRANSACCION" width="100">
								<h:outputText value="#{c.transactionState}"></h:outputText>
							</p:column>

							<p:column headerText="NRO. LOTE" width="100">
								<h:outputText value="#{c.loteNumber}"></h:outputText>
							</p:column>

							<p:column headerText="CANAL" width="100">
								<h:outputText value="#{c.channel}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA DESAFILIACION" width="80">
								<h:outputText value="#{c.disaffiliationDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA CREACION" width="80">
								<h:outputText value="#{c.createdAt}">
									<f:convertDateTime pattern="dd-MM-yyyy hh:mm:ss a" />
								</h:outputText>
							</p:column>

							<p:column headerText="USUARIO CREACION" width="80">
								<h:outputText value="#{c.createdBy.username}"></h:outputText>
							</p:column>


						</p:dataTable>

					</h:panelGrid>
				</p:outputPanel>
			</h:form>
		</p:dialog>


		<p:dialog header="Extornos" widgetVar="repaymentsDialog"
			showEffect="fade" hideEffect="fade" width="800" height="200">
			<h:form id="formRepayment">

				<p:outputPanel id="repaymentsDetail" style="text-align:center;">

					<h:panelGrid style="margin:auto;">

						<p:dataTable value="#{searchSaleController.repayments}" var="r"
							paginator="true" rows="5" id="repaymentsTable">

							<p:column headerText="CODIGO UNICO" width="100">
								<h:outputText value="#{r.sale.code}"></h:outputText>
							</p:column>

							<p:column headerText="NUMERO RECIBO" width="100">
								<h:outputText value="#{r.collection.receiptNumber}"></h:outputText>
							</p:column>

							<p:column headerText="NUMERO PRIMAS" width="100">
								<h:outputText value="#{r.insurancePremiumNumber}"></h:outputText>
							</p:column>

							<p:column headerText="IMPORTE DEVOLVER" width="100">
								<h:outputText value="#{r.returnedAmount}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA DEVOLUCION" width="80">
								<h:outputText value="#{r.returnedDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA ABONO" width="80">
								<h:outputText value="#{r.paymentDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA CREACION" width="80">
								<h:outputText value="#{r.createdAt}">
									<f:convertDateTime pattern="dd-MM-yyyy hh:mm:ss a" />
								</h:outputText>
							</p:column>

							<p:column headerText="USUARIO CREACION" width="80">
								<h:outputText value="#{r.user.username}"></h:outputText>
							</p:column>


						</p:dataTable>

					</h:panelGrid>
				</p:outputPanel>
			</h:form>
		</p:dialog>


		<p:dialog header="Mantenimientos" widgetVar="maintenancesDialog"
			showEffect="fade" hideEffect="fade" width="800" height="200">
			<h:form id="formMaintenance">
				<p:outputPanel id="maintenancesDetail" style="text-align:center;">

					<h:panelGrid style="margin:auto;">

						<p:dataTable value="#{searchSaleController.maintenances}" var="m"
							paginator="true" rows="5" id="maintenancesTable">

							<p:column headerText="ESTADO" width="100">
								<h:outputText value="#{m.state.name}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA ESTADO" width="100">
								<h:outputText value="#{m.date}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="USUARIO" width="100">
								<h:outputText value="#{m.downUser}"></h:outputText>
							</p:column>

							<p:column headerText="MOTIVO" width="100">
								<h:outputText value="#{m.downReason}"></h:outputText>
							</p:column>

							<p:column headerText="OBSERVACIONES" width="100">
								<h:outputText value="#{m.downObservation}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA ACTUALIZACION" width="80">
								<h:outputText value="#{m.createdAt}">
									<f:convertDateTime pattern="dd/MM/yyyy hh:mm:ss a" />
								</h:outputText>
							</p:column>

							<p:column headerText="USUARIO ACTUALIZACION" width="80">
								<h:outputText value="#{m.createdBy.username}"></h:outputText>
							</p:column>


						</p:dataTable>

					</h:panelGrid>
				</p:outputPanel>
			</h:form>
		</p:dialog>


		<p:dialog header="Notificaciones" widgetVar="notificationsDialog"
			showEffect="fade" hideEffect="fade" width="800" height="200">
			<h:form id="formNotification">
				<p:outputPanel id="notificationsDetail" style="text-align:center;">

					<h:panelGrid style="margin:auto;">

						<p:dataTable value="#{searchSaleController.notifications}" var="n"
							paginator="true" rows="5" id="notificationsTable">

							<p:column headerText="TIPO" width="100">
								<h:outputText value="#{n.type.name}"></h:outputText>
							</p:column>

							<p:column headerText="ESTADO" width="100">
								<h:outputText value="#{n.state.name}"></h:outputText>
							</p:column>

							<p:column headerText="FECHA ENVÍO" width="80">
								<h:outputText value="#{n.sendingAt}">
									<f:convertDateTime pattern="dd/MM/yyyy " />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA RESPUESTA" width="80">
								<h:outputText value="#{n.answeringAt}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>
							</p:column>

							<p:column headerText="FECHA CREACIÓN" width="80">
								<h:outputText value="#{n.createdAt}">
									<f:convertDateTime pattern="dd/MM/yyyy hh:mm:ss a" />
								</h:outputText>
							</p:column>

							<p:column headerText="USUARIO CREACIÓN" width="80">
								<h:outputText value="#{n.createdBy.username}"></h:outputText>
							</p:column>




						</p:dataTable>

					</h:panelGrid>
				</p:outputPanel>
			</h:form>
		</p:dialog>


		<p:dialog header="Password Supervisor" widgetVar="passSuperDialog"
			showEffect="fade" hideEffect="fade" width="800" height="200">
			<h:form id="formPassSuper">
				<h:panelGrid style="margin:auto;">

					<h:panelGrid style="margin:auto;text-align:center;">
						<p:messages id="messagesPassSuper"></p:messages>
					</h:panelGrid>

					<h:panelGrid columns="2">

						<p:outputLabel value="Password supervisor"></p:outputLabel>
						<p:password required="true"
							requiredMessage="Debe ingresar password supervisor"
							value="#{searchSaleController.passwordSupervisor}"></p:password>

					</h:panelGrid>

					<h:panelGrid style="margin:auto;text-align:center;">
						<p:commandButton actionListener="#{searchSaleController.validate}"
							update=":formPassSuper:messagesPassSuper" value="Aceptar">
							<p:ajax event="dialogReturn" update=":form:searchTable"
								listener="#{searchSaleController.afterAddMaintenance}" />
						</p:commandButton>
					</h:panelGrid>
				</h:panelGrid>
			</h:form>

		</p:dialog>





	</ui:define>

</ui:composition>
</html>
